---
import BaseLayout from "../layouts/BaseLayout.astro";
import Section from "../components/Section.astro";
---

<BaseLayout
  title="PIT — Build. Run. Control."
  description="PIT is a fast, portable local dev environment for PHP/Go stacks with Nginx, PHP-FPM, and per-project isolation."
>
  <!-- HERO -->
  <section class="relative mt-10 overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-10 pit-glow">
    <!-- ambient blobs -->
    <div class="pointer-events-none absolute -right-28 -top-28 h-80 w-80 rounded-full bg-red-500/20 blur-3xl"></div>
    <div class="pointer-events-none absolute -left-28 -bottom-28 h-80 w-80 rounded-full bg-red-500/10 blur-3xl"></div>

    <!-- top strip -->
    <div class="pointer-events-none absolute left-6 right-6 top-6 hidden h-7 sm:block">
      <div class="h-full w-full pit-checkered opacity-40"></div>
    </div>

    <div class="relative">
      <div class="flex flex-wrap items-center gap-2">
        <span class="pit-pill">
          <span class="inline-block h-2 w-2 rounded-full bg-red-500"></span>
          Portable Engine
        </span>
        <span class="pit-pill">Nginx + PHP-FPM</span>
        <span class="pit-pill">Per-project isolation</span>
      </div>

      <div class="mt-6 grid gap-10 lg:grid-cols-[1.2fr_.8fr] lg:items-start">
        <!-- Left -->
        <div>
          <h1 class="text-3xl font-black leading-tight tracking-tight sm:text-5xl">
            Local dev environment<br />
            with <span class="text-red-400">pit-lane speed</span>.
          </h1>

          <p class="mt-4 max-w-2xl text-sm leading-relaxed text-zinc-300 sm:text-base">
            PIT is a developer-first stack manager: run Nginx, PHP-FPM, and tools with clean process control,
            predictable ports/sockets, and project-first routing. Built to feel like an F1 pit stop: minimal downtime.
          </p>

          <div class="mt-7 flex flex-col gap-3 sm:flex-row sm:items-center">
            <a href="/docs" class="pit-btn pit-btn-primary">Read Docs</a>
            <a href="#features" class="pit-btn pit-btn-ghost">See features</a>
            <a href="/sponsorship" class="pit-btn pit-btn-ghost">Support PIT</a>
          </div>

          <!-- telemetry divider -->
          <div class="mt-8 h-[2px] w-full pit-telemetry opacity-80"></div>

          <!-- stats -->
          <div class="mt-7 grid gap-3 sm:grid-cols-3">
            <div class="pit-card pit-card-strong p-4">
              <div class="text-xs text-zinc-400">Goal</div>
              <div class="mt-1 text-sm font-extrabold">Predictable runtime</div>
              <div class="mt-1 text-xs text-zinc-400">Ports, sockets, logs stay stable.</div>
            </div>
            <div class="pit-card pit-card-strong p-4">
              <div class="text-xs text-zinc-400">Focus</div>
              <div class="mt-1 text-sm font-extrabold">Process hygiene</div>
              <div class="mt-1 text-xs text-zinc-400">No zombies, clean shutdown.</div>
            </div>
            <div class="pit-card pit-card-strong p-4">
              <div class="text-xs text-zinc-400">Style</div>
              <div class="mt-1 text-sm font-extrabold">Red pit-lane UI</div>
              <div class="mt-1 text-xs text-zinc-400">Minimal, fast, sharp.</div>
            </div>
          </div>
        </div>

        <!-- Right: terminal mock -->
        <div class="pit-card pit-card-strong overflow-hidden">
          <div class="flex items-center justify-between border-b border-white/10 bg-black/30 px-4 py-3">
            <div class="flex items-center gap-2">
              <span class="h-2.5 w-2.5 rounded-full bg-red-500/80"></span>
              <span class="h-2.5 w-2.5 rounded-full bg-yellow-500/50"></span>
              <span class="h-2.5 w-2.5 rounded-full bg-emerald-500/40"></span>
            </div>
            <div class="text-xs font-semibold text-zinc-400">pit / engine</div>
          </div>
          <div class="bg-black/40 px-4 py-4">
            <pre class="overflow-x-auto text-[12px] leading-relaxed text-zinc-200"><code><span class="text-zinc-500">$</span> pit up
<span class="text-emerald-400">✓</span> nginx        started   <span class="text-zinc-500">:80</span>
<span class="text-emerald-400">✓</span> php-fpm      started   <span class="text-zinc-500">unix:/runtime/php/php-fpm.sock</span>
<span class="text-emerald-400">✓</span> tools pool   ready     <span class="text-zinc-500">unix:/runtime/_tools/php/php-fpm.sock</span>

<span class="text-zinc-500">$</span> pit projects
<span class="text-zinc-500">•</span> laravel-app   <span class="text-zinc-500">→</span> <span class="text-red-300">laravel-app.test</span>
<span class="text-zinc-500">•</span> ci4-panel     <span class="text-zinc-500">→</span> <span class="text-red-300">ci4-panel.test</span>

<span class="text-zinc-500">$</span> pit down
<span class="text-emerald-400">✓</span> stopped cleanly (no zombie processes)</code></pre>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FEATURES -->
  <div id="features" class="scroll-mt-24"></div>

  <Section title="Features" desc="The core stuff PIT is obsessed with.">
    <div class="grid gap-4 md:grid-cols-2">
      <div class="pit-card pit-card-strong p-6">
        <div class="flex items-start justify-between gap-4">
          <div>
            <div class="text-sm font-extrabold">Nginx + PHP-FPM orchestration</div>
            <p class="mt-2 text-sm text-zinc-300">
              Start/stop services cleanly, keep logs structured, and avoid zombie processes.
            </p>
          </div>
          <div class="rounded-2xl border border-white/10 bg-red-500/10 px-3 py-2 text-xs font-extrabold text-red-300">
            CONTROL
          </div>
        </div>
        <div class="mt-4 flex flex-wrap gap-2">
          <span class="pit-pill">PID control</span>
          <span class="pit-pill">Health checks</span>
          <span class="pit-pill">Logs</span>
        </div>
      </div>

      <div class="pit-card pit-card-strong p-6">
        <div class="flex items-start justify-between gap-4">
          <div>
            <div class="text-sm font-extrabold">Project-first routing</div>
            <p class="mt-2 text-sm text-zinc-300">
              Map projects to virtual hosts quickly, keep configs stable, and reduce “where is it pointing?” pain.
            </p>
          </div>
          <div class="rounded-2xl border border-white/10 bg-red-500/10 px-3 py-2 text-xs font-extrabold text-red-300">
            ROUTE
          </div>
        </div>
        <div class="mt-4 flex flex-wrap gap-2">
          <span class="pit-pill">Auto vhost</span>
          <span class="pit-pill">.test domains</span>
          <span class="pit-pill">Isolation</span>
        </div>
      </div>

      <div class="pit-card pit-card-strong p-6">
        <div class="flex items-start justify-between gap-4">
          <div>
            <div class="text-sm font-extrabold">Tooling sandbox</div>
            <p class="mt-2 text-sm text-zinc-300">
              Run internal tools under a dedicated runtime folder, separate from project pools.
            </p>
          </div>
          <div class="rounded-2xl border border-white/10 bg-red-500/10 px-3 py-2 text-xs font-extrabold text-red-300">
            TOOLS
          </div>
        </div>
        <div class="mt-4 flex flex-wrap gap-2">
          <span class="pit-pill">/runtime/_tools</span>
          <span class="pit-pill">Socket separation</span>
          <span class="pit-pill">Cleaner shutdown</span>
        </div>
      </div>

      <div class="pit-card pit-card-strong p-6">
        <div class="flex items-start justify-between gap-4">
          <div>
            <div class="text-sm font-extrabold">Portable by default</div>
            <p class="mt-2 text-sm text-zinc-300">
              No system-wide mess. Keep everything self-contained and reproducible.
            </p>
          </div>
          <div class="rounded-2xl border border-white/10 bg-red-500/10 px-3 py-2 text-xs font-extrabold text-red-300">
            PORTABLE
          </div>
        </div>
        <div class="mt-4 flex flex-wrap gap-2">
          <span class="pit-pill">Self-contained</span>
          <span class="pit-pill">Versioned bins</span>
          <span class="pit-pill">Predictable paths</span>
        </div>
      </div>
    </div>
  </Section>

  <!-- WORKFLOW -->
  <Section title="Pit-lane workflow" desc="Short, strict, repeatable.">
    <div class="pit-card pit-card-strong p-6">
      <div class="mb-5 flex items-center justify-between gap-4">
        <div class="text-xs font-extrabold text-zinc-400">TELEMETRY</div>
        <div class="h-[2px] w-44 pit-telemetry opacity-80"></div>
      </div>

      <ol class="grid gap-4 md:grid-cols-3">
        <li class="rounded-2xl border border-white/10 bg-white/5 p-5">
          <div class="text-xs font-extrabold text-red-300">01</div>
          <div class="mt-1 text-sm font-extrabold">Start engine</div>
          <p class="mt-2 text-sm text-zinc-300">Boot services with consistent sockets and logs.</p>
        </li>
        <li class="rounded-2xl border border-white/10 bg-white/5 p-5">
          <div class="text-xs font-extrabold text-red-300">02</div>
          <div class="mt-1 text-sm font-extrabold">Load projects</div>
          <p class="mt-2 text-sm text-zinc-300">Route vhosts and isolate configs per project.</p>
        </li>
        <li class="rounded-2xl border border-white/10 bg-white/5 p-5">
          <div class="text-xs font-extrabold text-red-300">03</div>
          <div class="mt-1 text-sm font-extrabold">Control & iterate</div>
          <p class="mt-2 text-sm text-zinc-300">Restart cleanly, avoid port chaos, keep momentum.</p>
        </li>
      </ol>
    </div>
  </Section>

  <!-- CTA -->
  <section class="mt-14 mb-8">
    <div class="relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-8 pit-glow">
      <div class="pointer-events-none absolute -right-20 -top-20 h-64 w-64 rounded-full bg-red-500/20 blur-3xl"></div>

      <div class="relative flex flex-col items-start justify-between gap-5 sm:flex-row sm:items-center">
        <div>
          <div class="text-lg font-black tracking-tight">Ready to run PIT?</div>
          <p class="mt-1 text-sm text-zinc-300">
            Jump into docs for install, commands, and architecture.
          </p>
        </div>
        <div class="flex flex-wrap gap-2">
          <a href="/docs" class="pit-btn pit-btn-primary">Get started</a>
          <a href="/sponsorship" class="pit-btn pit-btn-ghost">Sponsorship</a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
